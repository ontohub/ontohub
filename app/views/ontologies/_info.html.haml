= render partial: '/ontologies/menu', locals: {resource: resource}

%h1#ontology_title
  = ontology_link_to resource
  %small
    -if !resource.language_id.nil?
      = link_to resource.language, resource.language
    - else
      = 'unknown'
    - if resource.logic
      = '/'
      = link_to resource.logic.to_s, resource.logic

- if resource.parent
  %small
    defined by
    %span= fancy_link(resource.parent)

%p= link_to resource.iri, download_path(resource) if download_path(resource)
%p= resource.description

- if resource.oops_supported?
  = render partial: '/ontologies/oops_state', locals: {resource: resource}

= status_tag

%nav
  %ul.nav.nav-tabs
    - @top_level_pages.each do |(page_title, page)|
      %li{class: page==current_page ? 'active' : nil}
        = link_to page_title, [*resource_chain, page]
  - if controller_name == "entities" || controller_name == "sentences" || controller_name == "children" 
    %nav
      %ul.nav.nav-tabs
        - @entities.each do |entity|
          %li{:class => (entity.kind == @active_kind ? 'active' : nil)}
            = link_to repository_ontology_entities_path(*resource_chain, kind: entity.kind) do
              = entity.count == 1 ? entity.kind : entity.kind.pluralize
              %span.badge{:style => entity.count == 0 && 'display:none'}= entity.count
        - pages.each do |page, path, count|
          %li{:class => (page==current_page ? 'active' : nil)}
            = link_to path do
              = page.to_s.capitalize
              - if count # hide counter if empty
                %span.badge{:style => count==0 && 'display:none'}= count

